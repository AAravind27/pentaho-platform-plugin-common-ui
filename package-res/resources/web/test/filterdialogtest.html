<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:pho="http:/www.pentaho.com">
<head>
<title>Filter Dialog Test</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<script type="text/javascript">
// <![CDATA[

    var djConfig = { modulePaths: {
                        dataaccess: "../../../../../data-access/resources/web/messages",
                        pentaho: "../.."
                    },
                   parseOnLoad: true,
                   baseUrl: '../dojo/dojo/'
                   };
                  

// ]]>
</script>

<script language='javascript' type='text/javascript' src='../dojo/dojo/dojo-all.js.uncompressed.js'></script>

        <script language="javascript" src="../../../../data-access/resources/web/pentaho-ajax.js" type="text/javascript"></script>
        <script language="javascript" src="../../../../data-access/resources/web/pentaho-thin-app.js" type="text/javascript"></script>
        <script language="javascript" src="../../../../data-access/resources/web/messages/Messages.js" type="text/javascript"></script>
        <script language="javascript" src="../../../../data-access/resources/web/oop.js" type="text/javascript"></script>
        <script language="javascript" src="../../../../data-access/resources/web/app.js" type="text/javascript"></script>
        <script language="javascript" src="../../../../data-access/resources/web/controller.js" type="text/javascript"></script>
        <script language="javascript" src="../../../../data-access/resources/web/xhr.js" type="text/javascript"></script>
        <script language="javascript" src="../../../../data-access/resources/web/cda.js" type="text/javascript"></script>
        <script language="javascript" src="../../../../data-access/resources/web/models-mql.js" type="text/javascript"></script>

<link rel="stylesheet" type="text/css" href="../dojo/dijit/themes/pentaho/pentaho.css"/>
<link href="../PIR.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="/pentaho-style/style/mainStyles.css"/>
<script language='javascript' type='text/javascript' src='../pir/Messages.js'></script>
<script language='javascript' type='text/javascript' src='../pir/controller.js'></script>
<script language='javascript' type='text/javascript' src='../pir/model.js'></script>
<script language='javascript' type='text/javascript' src='test-view.js'></script>
<script language="javascript" src="../../../../data-access/resources/web/pentaho-thin-app.js" type="text/javascript"></script>

<script type='text/javascript' djConfig='isDebug: true' src='../common/state.js'></script>

<script type="text/javascript">
	dojo.require("dojo.parser");
	dojo.require("dojo.dnd.Container");
	dojo.require("dojo.dnd.Selector");
	dojo.require("dojo.dnd.Source");
	dojo.require("dojo.dnd.Avatar");
	dojo.require("dojo.dnd.Manager");
	dojo.require("dojo.dnd.move");
    dojo.require("dijit.Dialog");
    dojo.require("dijit.form.Button");
    dojo.require("dijit.form.TextBox");
    dojo.require("dijit.form.Select");
    dojo.require("dijit.form.MultiSelect");
    dojo.require("dijit.Toolbar");
    dojo.require("dijit.Editor");
    dojo.require("dijit.ColorPalette");
    dojo.require("dijit.layout.TabContainer");
    dojo.require("dijit.layout.ContentPane");
    dojo.require("dijit.layout.BorderContainer");
    dojo.require("pentaho.common.button");
    dojo.require("pentaho.pir.FilterDialog");
    
    view = {};
    
    dlg = null;
    
    function doload() {
    
        controller = new pentaho.pir.controller();
        model = new pentaho.pir.model();
        // create a test view
        view = new pentaho.pir.view();
        // init the view and the controller
        view.init();
        model.init();
        controller.init();

      controller.setModel('steel-wheels/metadata.xmi:BV_ORDERS');

        // test with storage off
        controller.useStorage = false;
    
        dlg = dijit.byId('filterDialog');
        dlg.setLocalizationLookupFunction(view.getLocaleString);

        dlg.setDatasource(controller.datasource);

        var filter = model.createFilter("BC_PRODUCTS_PRODUCTLINE");
        filter.value = ["Testing"];
        dlg.configureFor(filter);

        dlg.callbacks = [okFunc, cancelFunc];
        
        dlg.execute = okFunc;
        dlg.onCancel = cancelFunc;
        dlg.show();
    }
    
    var strIdx = 0;
    function localize() {
        strIdx++;
        return 'str '+strIdx;
    }

    function okFunc() {
        alert('okFunc');
        dlg.hide();
    }

    function cancelFunc() {
        alert('cancelFunc');
        dlg.hide();
    }
    
</script>

</head>


<body class="tundra body" onload="doload()">

    <!-- div id="button1" label="my button" onclick="alert(99)" dojoType="pentahocommon.button"/ -->

    <div id="filterDialog" dojoType="pentaho.pir.FilterDialog"></div>

</body>
  
</html>
